<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Our Data Toolbox (Pandas)</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                        mono: ['Consolas', 'Monaco', 'Courier New', 'monospace'],
                    },
                    colors: {
                        'lesson-primary': '#F59E0B', /* Amber Yellow */
                    }
                }
            }
        }
    </style>
</head>
<body class="bg-gray-50 font-inter text-gray-800 p-4 md:p-8">

    <header class="mb-8">
        <h1 class="text-3xl md:text-4xl font-extrabold text-lesson-primary">
            <span class="text-lesson-primary/70">Session 1.3:</span> Our Data Toolbox (Pandas) ðŸ§°
        </h1>
        <p class="mt-2 text-lg text-gray-600">Getting set up with the most crucial tool for data science: <strong>Pandas</strong>.</p>
    </header>

    <main class="space-y-12 max-w-4xl mx-auto">

        <!-- Analogy Section -->
        <section class="bg-amber-100 p-5 rounded-xl shadow-lg border-l-4 border-lesson-primary">
            <h2 class="text-xl font-bold text-lesson-primary mb-2 flex items-center">
                <span class="mr-2">ðŸ’¡</span> Analogy: The Carpenter's Toolbox
            </h2>
            <p class="text-gray-700">
                A carpenter needs a <strong>toolbox</strong> full of hammers, saws, and measures to work with wood. We, as data scientists, need a specialized <strong>toolbox</strong> for data tables, and that toolbox is called <strong>Pandas</strong> (a Python library).
            </p>
        </section>

        <!-- Content -->
        <section class="space-y-4">
            <h2 class="text-2xl font-bold text-gray-800">What is an <code>import</code>?</h2>
            <p class="text-gray-700">
                A <strong>library</strong> (like Pandas) is a huge collection of pre-written tools that someone else built so you don't have to start from scratch. The <code>import</code> command simply tells your Python program: "Go grab this toolbox and make the tools available for me to use!"
            </p>

            <div class="p-4 bg-white rounded-xl shadow-md border-t-4 border-blue-500">
                <h3 class="text-xl font-semibold text-blue-700 mb-2">The Magic Command</h3>
                <p class="mb-3 text-gray-700">
                    The command <code>import pandas as pd</code> does two things:
                    <ol class="list-decimal list-inside ml-2 mt-2 space-y-1">
                        <li><code>import pandas</code>: Opens the Pandas toolbox.</li>
                        <li><code>as pd</code>: Gives it a short, easy nickname (<code>pd</code>). This saves us time by typing <code>pd.</code> instead of <code>pandas.</code> every time we use a tool.</li>
                    </ol>
                </p>
            </div>
        </section>

        <!-- Code Snippet -->
        <section>
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Code Snippet: Importing Pandas</h2>
            <div class="code-block relative bg-gray-800 rounded-lg p-4 shadow-xl">
                <pre id="code-snippet-1" class="text-white font-mono text-sm overflow-x-auto">
import pandas as pd
                </pre>
                <button onclick="copyToClipboard('code-snippet-1')" class="copy-button absolute top-3 right-3 px-3 py-1 text-xs bg-lesson-primary text-white rounded-md hover:bg-lesson-primary/80 transition duration-150">
                    Copy Code
                </button>
            </div>
        </section>

        <hr class="border-t-2 border-amber-200">

        <!-- Interactive Element: Fake Terminal -->
        <section>
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ðŸŽ® Terminal Validator</h2>
            <p class="mb-4 text-gray-600">Type the correct command into the terminal input below and click 'Run' to "open" the toolbox.</p>

            <div class="bg-gray-900 rounded-lg shadow-2xl p-4 space-y-3">
                <div id="terminal-history" class="text-green-400 font-mono text-sm min-h-[50px]">
                    <span class="text-red-400">Welcome to the Python Shell.</span>
                </div>
                <div class="flex items-center">
                    <span class="text-green-500 font-mono mr-2">In [1]:</span>
                    <input type="text" id="command-input" class="flex-grow bg-transparent border-none text-white font-mono text-sm focus:outline-none p-0" placeholder="Type command here..." onkeypress="if(event.key === 'Enter') validateCommand()">
                    <button onclick="validateCommand()" class="ml-4 px-4 py-2 bg-lesson-primary text-white font-semibold rounded-lg hover:bg-lesson-primary/80 transition duration-150">
                        Run
                    </button>
                </div>
            </div>
            <div id="feedback-message" class="mt-4 p-3 rounded-lg text-center font-semibold transition-opacity duration-300 opacity-0"></div>
        </section>
    </main>

    <script>
        // Copy function utility (included in all files)
        function copyToClipboard(elementId) {
            const codeElement = document.getElementById(elementId);
            const textToCopy = codeElement.innerText || codeElement.value;
            const button = codeElement.nextElementSibling || codeElement.closest('.code-block').querySelector('.copy-button');

            // 1. Create a temporary textarea element to hold the text
            const textArea = document.createElement("textarea");
            textArea.value = textToCopy;
            
            // 2. Make it invisible and fixed position to avoid scrolling
            textArea.style.position = 'fixed';
            textArea.style.opacity = '0';
            
            document.body.appendChild(textArea);
            
            // 3. Select the text inside the textarea
            textArea.focus();
            textArea.select();

            try {
                // 4. Use the deprecated but reliable document.execCommand('copy')
                document.execCommand('copy');
                button.textContent = 'Copied!';
                setTimeout(() => button.textContent = 'Copy Code', 2000);
            } catch (err) {
                console.error('Failed to copy text using execCommand', err);
                button.textContent = 'Failed to Copy';
                setTimeout(() => button.textContent = 'Copy Code', 2000);
            }
            
            // 5. Clean up: remove the temporary element
            document.body.removeChild(textArea);
        }

        let runCount = 1;

        function updateTerminalHistory(command, resultClass, resultText) {
            const history = document.getElementById('terminal-history');
            const newEntry = document.createElement('div');
            newEntry.innerHTML = `<span class="text-green-500">In [${runCount}]:</span> ${command}<br><span class="${resultClass}">${resultText}</span>`;
            history.appendChild(newEntry);
            runCount++;
        }

        function setFeedback(message, isSuccess) {
            const feedbackEl = document.getElementById('feedback-message');
            feedbackEl.textContent = message;
            feedbackEl.classList.remove('bg-red-100', 'text-red-800', 'bg-green-100', 'text-green-800', 'opacity-0');
            if (isSuccess) {
                feedbackEl.classList.add('bg-green-100', 'text-green-800');
            } else {
                feedbackEl.classList.add('bg-red-100', 'text-red-800');
            }
            feedbackEl.classList.add('opacity-100');
            setTimeout(() => {
                feedbackEl.classList.remove('opacity-100');
                feedbackEl.classList.add('opacity-0');
            }, 3000);
        }

        function validateCommand() {
            const inputEl = document.getElementById('command-input');
            const command = inputEl.value.trim();
            inputEl.value = ''; // Clear input immediately
            
            const correctCommand = "import pandas as pd";

            if (command.toLowerCase() === correctCommand) {
                updateTerminalHistory(command, 'text-green-400', 'Success! The \'pd\' toolbox is now open and ready to use.');
                setFeedback("Success! Pandas is imported.", true);
            } else {
                // Check if they got the words right but capitalization or spacing wrong
                const errorText = command.toLowerCase().includes('import') && command.toLowerCase().includes('pandas') ? 
                    "SyntaxError: Check your spelling and spacing! Try import pandas as pd." : 
                    "SyntaxError: That's not the right command! Try import pandas as pd.";
                    
                updateTerminalHistory(command, 'text-red-400', errorText);
                setFeedback("Error: Try again!", false);
            }
        }
    </script>
</body>
</html>