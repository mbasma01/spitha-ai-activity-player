<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Interactive Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.3s ease-out forwards;
        }
    </style>
</head>
<body class="bg-slate-950 text-slate-200">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS (Replaces Lucide React imports for standalone usage) ---
        const IconBase = ({ children, size = 24, className = "" }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} 
                height={size} 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {children}
            </svg>
        );

        const BookOpen = (props) => <IconBase {...props}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></IconBase>;
        const Code = (props) => <IconBase {...props}><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></IconBase>;
        const CheckCircle = (props) => <IconBase {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></IconBase>;
        const RefreshCw = (props) => <IconBase {...props}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></IconBase>;
        const FileText = (props) => <IconBase {...props}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><line x1="10" y1="9" x2="8" y2="9"/></IconBase>;
        const Check = (props) => <IconBase {...props}><polyline points="20 6 9 17 4 12"/></IconBase>;
        const Copy = (props) => <IconBase {...props}><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></IconBase>;
        const ArrowRight = (props) => <IconBase {...props}><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></IconBase>;
        const Terminal = (props) => <IconBase {...props}><polyline points="4 17 10 11 4 5"/><line x1="12" y1="19" x2="20" y2="19"/></IconBase>;
        const AlertCircle = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></IconBase>;
        const ExternalLink = (props) => <IconBase {...props}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></IconBase>;


        // --- UTILS ---

        // Helper to render text with inline code blocks (splits by backticks)
        const formatText = (text) => {
          if (!text) return null;
          const parts = text.split('`');
          return parts.map((part, index) => {
            if (index % 2 === 1) { // Inside backticks
              return <code key={index} className="bg-slate-800 border border-slate-700 px-1.5 py-0.5 rounded text-blue-300 font-mono text-sm">{part}</code>;
            }
            return <span key={index}>{part}</span>;
          });
        };

        // --- DATA & CONTENT ---

        const TASKS = [
          {
            id: 1,
            title: "Setup & Data Loading",
            description: "Let's get started by importing the necessary library and loading our dataset. Open your Google Colab notebook to begin.",
            context: "The URL for the raw data is: `https://raw.githubusercontent.com/mbasma01/spitha-ai-notebooks/main/Attendance_Prediction.csv`",
            objective: "Import pandas and load the CSV into a DataFrame named `df`.",
            hint: "Use `pd.read_csv()`.",
            solution: `import pandas as pd

url = "https://raw.githubusercontent.com/mbasma01/spitha-ai-notebooks/main/student_habits_performance.csv"
df = pd.read_csv(url)

# Display first few rows to check
print(df.head())`,
            type: "pandas"
          },
          {
            id: 2,
            title: "Renaming Headers",
            description: "Often, dataset column names are messy or inconsistent. Let's clean them up to make them easier to work with.",
            context: "Assume the columns are currently names like `STU_ID`, `ATT_rate`, `EXAM_score`. We want them to be readable.",
            objective: "Rename the columns to: `Student_ID`, `Attendance_Rate`, `Exam_Score`, `Study_Hours`, `Pass_Status`.",
            hint: "Use the `.rename(columns={...})` method or assign a list to `df.columns` if you know the order.",
            solution: `# Method 1: Dictionary (Safer)
df = df.rename(columns={
    'STU_ID': 'Student_ID',
    'ATT_rate': 'Attendance_Rate',
    'EXAM_score': 'Exam_Score',
    'STD_hrs': 'Study_Hours',
    'Pass': 'Pass_Status'
})

# Method 2: Direct Assignment (if you know the order matches)
# df.columns = ['Student_ID', 'Attendance_Rate', 'Exam_Score', 'Study_Hours', 'Pass_Status']`,
            type: "pandas"
          },
          {
            id: 3,
            title: "Feature Engineering (Synthetic Column)",
            description: "We need a new metric. Let's create a synthetic column that estimates 'Effort'.",
            context: "Let's assume 'Effort' is calculated as the `Attendance_Rate` multiplied by `Study_Hours`.",
            objective: "Create a new column named `Effort_Score`.",
            hint: "You can perform math operations directly on Series: `df['New'] = df['A'] * df['B']`",
            solution: `df['Effort_Score'] = df['Attendance_Rate'] * df['Study_Hours']

print(df[['Attendance_Rate', 'Study_Hours', 'Effort_Score']].head())`,
            type: "pandas"
          },
          {
            id: 4,
            title: "Filtering: Subtables",
            description: "Let's isolate high-performing students.",
            context: "We only want to see data for students who have an `Exam_Score` greater than 85.",
            objective: "Create a new DataFrame `high_performers` containing only rows where `Exam_Score` > 85.",
            hint: "Use boolean indexing: `df[df['Col'] > value]`",
            solution: `high_performers = df[df['Exam_Score'] > 85]

print(high_performers.head())`,
            type: "pandas"
          },
          {
            id: 5,
            title: "Filtering: OR Condition",
            description: "Let's find students who are struggling or have low attendance.",
            context: "Find students who either have `Exam_Score` < 50 OR `Attendance_Rate` < 60.",
            objective: "Filter the DataFrame using the OR operator.",
            hint: "In Pandas, use the bitwise OR operator `|` and wrap conditions in parentheses.",
            solution: `struggling_students = df[(df['Exam_Score'] < 50) | (df['Attendance_Rate'] < 60)]

print(struggling_students.head())`,
            type: "pandas"
          },
          {
            id: 6,
            title: "Filtering: AND Condition",
            description: "Let's find the 'Model Students'.",
            context: "Find students who have `Study_Hours` > 5 AND `Pass_Status` equals 1 (or 'Yes').",
            objective: "Filter the DataFrame using the AND operator.",
            hint: "In Pandas, use the bitwise AND operator `&` and wrap conditions in parentheses.",
            solution: `model_students = df[(df['Study_Hours'] > 5) & (df['Pass_Status'] == 1)]

print(model_students.head())`,
            type: "pandas"
          },
          {
            id: 7,
            title: "Filtering: Complex Combination",
            description: "Let's try a more specific query.",
            context: "We want students who (Failed the exam OR had low attendance) BUT (still studied more than 3 hours).",
            objective: "Filter: (Score < 50 OR Attendance < 50) AND (Study_Hours > 3).",
            hint: "Group the OR condition in its own set of parentheses before applying the AND.",
            solution: `complex_filter = df[ ((df['Exam_Score'] < 50) | (df['Attendance_Rate'] < 50)) & (df['Study_Hours'] > 3) ]

print(complex_filter.head())`,
            type: "pandas"
          },
          {
            id: 8,
            title: "Aggregation: Value Counts",
            description: "Let's analyze the distribution of the data.",
            context: "We want to see how many students passed vs. failed.",
            objective: "Use `value_counts()` on the `Pass_Status` column and normalize it to see percentages.",
            hint: "method: `.value_counts(normalize=True)`",
            solution: `status_counts = df['Pass_Status'].value_counts()
print("Raw Counts:")
print(status_counts)

print("\nPercentages:")
print(df['Pass_Status'].value_counts(normalize=True) * 100)`,
            type: "pandas"
          },
          {
            id: 9,
            title: "Control Flow: Basic If",
            description: "Now let's step back to pure Python logic. We'll verify a single variable.",
            context: "Imagine we extracted the average score into a variable `avg_score = 72`.",
            objective: "Write an `if` statement that prints 'Class Average is passing' if `avg_score` is >= 70.",
            hint: "Standard python indentation is crucial.",
            solution: `avg_score = 72

if avg_score >= 70:
    print("Class Average is passing")`,
    type: "python"
  },
  {
    id: 10,
    title: "Control Flow: If-Else",
    description: "Handling two outcomes.",
    context: "A student has a score of 45.",
    objective: "Write an if-else block. If score >= 50 print 'Passed', otherwise print 'Retake needed'.",
    hint: "Don't forget the colons `:` after if and else.",
    solution: `student_score = 45

if student_score >= 50:
    print("Passed")
else:
    print("Retake needed")`,
    type: "python"
  },
  {
    id: 11,
    title: "Control Flow: If-Elif-Else",
    description: "Categorizing data into multiple buckets.",
    context: "We want to assign a letter grade based on a score variable `score`.",
    objective: ">= 90 is 'A', >= 80 is 'B', >= 70 is 'C', otherwise 'F'. Print the grade.",
    hint: "Use `elif` for the middle conditions. The order matters!",
    solution: `score = 85

if score >= 90:
    grade = 'A'
elif score >= 80:
    grade = 'B'
elif score >= 70:
    grade = 'C'
else:
    grade = 'F'

print(f"Grade: {grade}")`,
    type: "python"
  },
  {
    id: 12,
    title: "Loops: For Loop",
    description: "Iterating through a list of values.",
    context: "We have a list of recent exam scores: `scores = [88, 92, 76, 55, 95]`.",
    objective: "Write a for loop that iterates through `scores` and prints each score adjusted by adding 2 bonus points.",
    hint: "`for x in list:`",
    solution: `scores = [88, 92, 76, 55, 95]

for s in scores:
    print(s + 2)`,
    type: "python"
  },
  {
    id: 13,
    title: "Loops: While Loop",
    description: "Looping until a condition is met.",
    context: "We are counting down the timer for an exam.",
    objective: "Start `timer` at 5. While `timer` is greater than 0, print the number and decrease `timer` by 1. Finally, print 'Time is up!'.",
    hint: "Ensure you decrement the variable inside the loop to avoid an infinite loop.",
    solution: `timer = 5

while timer > 0:
    print(f"{timer} minutes remaining...")
    timer -= 1

print("Time is up!")`,
    type: "python"
  },
  {
    id: 14,
    title: "Loops: For Loop with Nested Condition",
    description: "Combining iteration and logic.",
    context: "Using the same list `scores = [88, 92, 76, 55, 95]`.",
    objective: "Iterate through the list. If a score is >= 90, print 'Honors'. If it's between 70 and 89, print 'Pass'. Otherwise, print 'Fail'.",
    hint: "Put the if/elif/else structure *inside* the for loop block.",
    solution: `scores = [88, 92, 76, 55, 95]

for s in scores:
    if s >= 90:
        print(f"{s}: Honors")
    elif s >= 70:
        print(f"{s}: Pass")
    else:
        print(f"{s}: Fail")`,
    type: "python"
  }
];

        const REFRESHER_CONTENT = [
          {
            title: "Pandas: Basics",
            content: (
              <div className="space-y-3">
                <div>
                    <p className="font-semibold text-blue-300 mb-1">Loading Data</p>
                    <code className="block bg-slate-950 border border-slate-700 p-2 rounded text-sm text-slate-300 font-mono">df = pd.read_csv('file.csv')</code>
                </div>
                <div>
                    <p className="font-semibold text-blue-300 mb-1">Inspecting</p>
                    <code className="block bg-slate-950 border border-slate-700 p-2 rounded text-sm text-slate-300 font-mono">
                      df.head(n)  # First n rows<br/>
                      df.shape    # (rows, cols)<br/>
                      df.columns  # Column names<br/>
                      df.info()   # Types & Nulls
                    </code>
                </div>
              </div>
            )
          },
          {
            title: "Pandas: Filtering",
            content: (
              <div className="space-y-3">
                <div>
                    <p className="font-semibold text-blue-300 mb-1">Boolean Indexing</p>
                    <code className="block bg-slate-950 border border-slate-700 p-2 rounded text-sm text-slate-300 font-mono">
                      # Basic<br/>
                      df[df['col'] &gt; 5]<br/><br/>
                      # AND (&)<br/>
                      df[(cond1) & (cond2)]<br/><br/>
                      # OR (|)<br/>
                      df[(cond1) | (cond2)]
                    </code>
                </div>
                <p className="text-xs text-slate-400 italic">Note: Parentheses around conditions are mandatory in Pandas!</p>
              </div>
            )
          },
          {
            title: "Python: Control Flow",
            content: (
              <div className="space-y-3">
                <div>
                    <p className="font-semibold text-blue-300 mb-1">If / Elif / Else</p>
                    <code className="block bg-slate-950 border border-slate-700 p-2 rounded text-sm text-slate-300 font-mono">
                      if condition:<br/>
                      &nbsp;&nbsp;do_something()<br/>
                      elif other_cond:<br/>
                      &nbsp;&nbsp;do_other()<br/>
                      else:<br/>
                      &nbsp;&nbsp;fallback()
                    </code>
                </div>
              </div>
            )
          },
          {
            title: "Python: Loops",
            content: (
              <div className="space-y-3">
                <div>
                    <p className="font-semibold text-blue-300 mb-1">For Loop</p>
                    <code className="block bg-slate-950 border border-slate-700 p-2 rounded text-sm text-slate-300 font-mono">
                      items = [1, 2, 3]<br/>
                      for i in items:<br/>
                      &nbsp;&nbsp;print(i)
                    </code>
                </div>
                <div>
                    <p className="font-semibold text-blue-300 mb-1">While Loop</p>
                    <code className="block bg-slate-950 border border-slate-700 p-2 rounded text-sm text-slate-300 font-mono">
                      count = 0<br/>
                      while count &lt; 5:<br/>
                      &nbsp;&nbsp;count += 1
                    </code>
                </div>
              </div>
            )
          }
        ];

        // --- COMPONENTS ---

        const Header = ({ activeTab, setActiveTab, progress }) => (
          <header className="bg-slate-900 border-b border-slate-800 sticky top-0 z-50 shadow-md">
            <div className="max-w-6xl mx-auto px-4 h-16 flex items-center justify-between">
              <div className="flex items-center gap-3">
                <div className="p-2 bg-blue-600 rounded-lg shadow-lg shadow-blue-900/50">
                  <Terminal size={20} className="text-white" />
                </div>
                <div>
                  <h1 className="font-bold text-lg leading-tight text-white">Python Interactive Lab</h1>
                  <p className="text-xs text-slate-400">Pandas & Logic Refresher</p>
                </div>
              </div>
              
              <div className="flex gap-3 items-center">
                <a 
                  href="https://colab.research.google.com/"
                  target="_blank"
                  rel="noreferrer"
                  className="flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-bold text-amber-500 bg-amber-950/30 border border-amber-900/50 hover:bg-amber-900/50 transition-colors mr-2"
                >
                   <ExternalLink size={14} />
                   <span className="hidden sm:inline">Open Colab</span>
                   <span className="sm:hidden">Colab</span>
                </a>

                <div className="h-6 w-px bg-slate-800 hidden sm:block"></div>

                <button 
                  onClick={() => setActiveTab('lab')}
                  className={`px-4 py-2 rounded-full text-sm font-medium transition-all ${activeTab === 'lab' ? 'bg-blue-600 text-white shadow-lg shadow-blue-900/50' : 'text-slate-400 hover:text-white hover:bg-slate-800'}`}
                >
                  The Lab
                </button>
                <button 
                  onClick={() => setActiveTab('refresher')}
                  className={`px-4 py-2 rounded-full text-sm font-medium transition-all ${activeTab === 'refresher' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-900/50' : 'text-slate-400 hover:text-white hover:bg-slate-800'}`}
                >
                  Refresher
                </button>
              </div>
            </div>
            {activeTab === 'lab' && (
              <div className="h-1 bg-slate-800 w-full">
                <div 
                  className="h-full bg-gradient-to-r from-blue-500 to-green-400 transition-all duration-500 ease-out" 
                  style={{ width: `${progress}%` }}
                />
              </div>
            )}
          </header>
        );

        const TaskCard = ({ task, onNext, onPrev, isLast, onSaveAnswer, savedAnswer }) => {
          const [userCode, setUserCode] = useState(savedAnswer || "");
          const [copied, setCopied] = useState(false);

          // Reset local state when task changes, but keep saved answer if exists
          useEffect(() => {
            setUserCode(savedAnswer || "");
            setCopied(false);
          }, [task.id, savedAnswer]);

          const handleNext = () => {
            onSaveAnswer(task.id, userCode);
            onNext();
          };

          const copyHint = () => {
            const textToCopy = task.hint.replace(/`/g, '');
            navigator.clipboard.writeText(textToCopy);
            setCopied(true);
            setTimeout(() => setCopied(false), 2000);
          }

          return (
            <div className="max-w-4xl mx-auto mt-8 px-4 pb-20 animate-fade-in">
              {/* Question Header */}
              <div className="bg-slate-900 rounded-2xl shadow-xl border border-slate-800 overflow-hidden mb-6">
                <div className="bg-slate-900/50 border-b border-slate-800 px-6 py-4 flex justify-between items-center">
                  <span className="text-xs font-bold tracking-wider text-slate-400 uppercase">
                    Task {task.id} / {TASKS.length} ‚Ä¢ {task.type === 'pandas' ? 'üêº Pandas' : 'üêç Python Basic'}
                  </span>
                  {savedAnswer && <span className="text-green-500 text-xs font-bold flex items-center gap-1"><Check size={14} /> Saved</span>}
                </div>
                
                <div className="p-6">
                  <h2 className="text-2xl font-bold text-white mb-2">{task.title}</h2>
                  <p className="text-slate-300 mb-4 text-lg">{formatText(task.description)}</p>
                  
                  {/* Context Block */}
                  <div className="bg-slate-800 border-l-4 border-blue-500 p-4 rounded-r mb-6">
                    <h3 className="text-xs font-bold text-blue-400 uppercase tracking-widest mb-1">Context</h3>
                    <p className="text-slate-300">{formatText(task.context)}</p>
                  </div>

                  <div className="space-y-4">
                     {/* Objective */}
                     <div className="flex items-start gap-3">
                        <div className="mt-1 p-1 bg-green-900/30 text-green-400 rounded-full">
                            <CheckCircle size={16} />
                        </div>
                        <div>
                            <span className="font-bold text-slate-200 block">Objective</span>
                            <span className="text-slate-400">{formatText(task.objective)}</span>
                        </div>
                     </div>
                     
                     {/* Hint Block */}
                     <div className="flex items-start gap-3 group relative">
                        <div className="mt-1 p-1 bg-amber-900/30 text-amber-400 rounded-full">
                            <AlertCircle size={16} />
                        </div>
                        <div className="flex-grow">
                            <div className="flex justify-between items-center mb-1">
                                <span className="font-bold text-slate-200">Hint</span>
                                <button 
                                    onClick={copyHint}
                                    className="flex items-center gap-1 text-xs text-slate-500 hover:text-amber-400 transition-colors opacity-0 group-hover:opacity-100"
                                    title="Copy Hint"
                                >
                                    {copied ? "Copied!" : "Copy"} <Copy size={12}/>
                                </button>
                            </div>
                            <div className="text-slate-400 bg-slate-800/50 p-2 rounded border border-slate-700/50 font-medium">
                                {formatText(task.hint)}
                            </div>
                        </div>
                     </div>
                  </div>
                </div>
              </div>

              {/* Workspace */}
              <div className="flex flex-col h-full bg-slate-900 p-6 rounded-2xl shadow-xl border border-slate-800">
                  <label className="block text-sm font-medium text-slate-400 mb-2 flex justify-between">
                      <span>Your Solution (Optional)</span>
                      <span className="text-xs text-slate-500">Paste from Colab for your final report</span>
                  </label>
                  <div className="relative flex-grow">
                      <textarea
                          value={userCode}
                          onChange={(e) => setUserCode(e.target.value)}
                          className="w-full h-48 bg-black text-slate-200 font-mono text-sm p-4 rounded-xl border border-slate-700 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 focus:outline-none resize-none"
                          placeholder="# Run your code in Google Colab..."
                          spellCheck="false"
                      />
                      <div className="absolute bottom-4 right-4 text-xs text-slate-600 pointer-events-none">
                          Python 3
                      </div>
                  </div>
              </div>

              {/* Navigation Footer */}
              <div className="fixed bottom-0 left-0 right-0 p-4 bg-slate-900 border-t border-slate-800 shadow-2xl z-40">
                <div className="max-w-4xl mx-auto flex justify-between items-center">
                    <button 
                        onClick={onPrev}
                        disabled={task.id === 1}
                        className={`px-4 py-2 rounded-lg font-medium transition-colors ${task.id === 1 ? 'text-slate-600 cursor-not-allowed' : 'text-slate-400 hover:bg-slate-800 hover:text-white'}`}
                    >
                        Previous
                    </button>
                    
                    <div className="text-sm font-medium text-slate-500 hidden sm:block">
                        Interactive Session ‚Ä¢ {Math.round((TASKS.length - task.id) * 10)} mins remaining est.
                    </div>

                    <button 
                        onClick={handleNext}
                        className="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium flex items-center gap-2 shadow-lg shadow-blue-900/50 transition-transform active:scale-95"
                    >
                        {isLast ? "Finish Lab & View Solutions" : "Next Task"} <ArrowRight size={18} />
                    </button>
                </div>
              </div>
            </div>
          );
        };

        const RefresherTab = () => (
          <div className="max-w-5xl mx-auto p-6 animate-fade-in pb-20">
            <div className="mb-8 text-center">
                <h2 className="text-3xl font-bold text-white">Refresher Material</h2>
                <p className="text-slate-400 mt-2">Quick reference for the concepts covered in this lab.</p>
            </div>
            
            <div className="grid md:grid-cols-2 lg:grid-cols-2 gap-6">
              {REFRESHER_CONTENT.map((section, idx) => (
                <div key={idx} className="bg-slate-900 text-slate-200 rounded-xl overflow-hidden shadow-xl border border-slate-800">
                  <div className="bg-slate-950 px-6 py-3 border-b border-slate-800 flex items-center gap-2">
                    <FileText size={16} className="text-blue-400"/>
                    <h3 className="font-bold text-white">{section.title}</h3>
                  </div>
                  <div className="p-6 text-sm">
                    {section.content}
                  </div>
                </div>
              ))}
            </div>

            <div className="mt-8 bg-slate-900 border border-slate-800 rounded-xl p-6 shadow-xl">
                <h3 className="text-lg font-bold text-blue-400 mb-2">Pro Tip: Documentation</h3>
                <p className="text-slate-400 mb-4">
                    Programming isn't about memorizing everything. It's about knowing how to find the answer.
                    Keep the official Pandas documentation open in another tab.
                </p>
                <a 
                    href="https://pandas.pydata.org/docs/" 
                    target="_blank" 
                    rel="noreferrer"
                    className="inline-flex items-center gap-2 text-blue-400 font-bold hover:text-blue-300 hover:underline"
                >
                    Visit Pandas Docs <ArrowRight size={16} />
                </a>
            </div>
          </div>
        );

        const SummaryView = ({ answers, onRestart }) => {
          return (
            <div className="max-w-4xl mx-auto p-6 pb-20 animate-fade-in">
              <div className="text-center mb-10">
                <div className="inline-block p-4 bg-green-900/20 rounded-full text-green-500 mb-4">
                    <CheckCircle size={48} />
                </div>
                <h2 className="text-3xl font-bold text-white">Lab Complete!</h2>
                <p className="text-slate-400 mt-2">Here are the solutions for the lab tasks.</p>
              </div>

              <div className="space-y-8">
                {TASKS.map((task) => (
                    <div key={task.id} className="bg-slate-900 border border-slate-800 rounded-xl overflow-hidden shadow-xl">
                        <div className="bg-slate-950 px-6 py-3 border-b border-slate-800 font-bold text-slate-200 flex justify-between">
                            <span>Task {task.id}: {task.title}</span>
                        </div>
                        <div className="grid md:grid-cols-2 divide-y md:divide-y-0 md:divide-x divide-slate-800">
                            <div className="p-4 bg-slate-900 order-2 md:order-1">
                                 {/* Correct Solution always shown at the end */}
                                <span className="text-xs font-bold text-green-500 uppercase tracking-wider mb-2 block">Correct Solution</span>
                                <pre className="text-sm font-mono text-slate-300 whitespace-pre-wrap bg-black/30 p-3 rounded border border-slate-800/50">
                                    {task.solution}
                                </pre>
                            </div>
                            {answers[task.id] && (
                                 <div className="p-4 order-1 md:order-2 bg-slate-900/50">
                                     {/* User Code only if they pasted something */}
                                    <span className="text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 block">Your Paste</span>
                                    <pre className="text-sm font-mono text-slate-400 whitespace-pre-wrap">
                                        {answers[task.id]}
                                    </pre>
                                </div>
                            )}
                        </div>
                    </div>
                ))}
              </div>

              <div className="mt-12 text-center">
                <button 
                    onClick={onRestart}
                    className="px-6 py-3 bg-slate-800 text-white rounded-lg font-medium hover:bg-slate-700 transition-colors flex items-center gap-2 mx-auto border border-slate-700"
                >
                    <RefreshCw size={18} /> Start Over
                </button>
              </div>
            </div>
          );
        };

        const App = () => {
          const [activeTab, setActiveTab] = useState('lab'); // 'lab', 'refresher'
          const [currentTaskIndex, setCurrentTaskIndex] = useState(0);
          const [userAnswers, setUserAnswers] = useState({});
          const [isFinished, setIsFinished] = useState(false);

          const progress = ((currentTaskIndex + 1) / TASKS.length) * 100;

          const handleNext = () => {
            if (currentTaskIndex < TASKS.length - 1) {
              setCurrentTaskIndex(prev => prev + 1);
              window.scrollTo({ top: 0, behavior: 'smooth' });
            } else {
              setIsFinished(true);
              window.scrollTo({ top: 0, behavior: 'smooth' });
            }
          };

          const handlePrev = () => {
            if (currentTaskIndex > 0) {
              setCurrentTaskIndex(prev => prev - 1);
            }
          };

          const saveAnswer = (taskId, code) => {
            setUserAnswers(prev => ({
                ...prev,
                [taskId]: code
            }));
          };

          const restart = () => {
            setCurrentTaskIndex(0);
            setUserAnswers({});
            setIsFinished(false);
            setActiveTab('lab');
          };

          return (
            <div className="min-h-screen bg-slate-950 font-sans text-slate-200 selection:bg-blue-500/30">
              <Header activeTab={activeTab} setActiveTab={setActiveTab} progress={progress} />
              
              <main className="pt-6">
                {activeTab === 'refresher' ? (
                    <RefresherTab />
                ) : isFinished ? (
                    <SummaryView answers={userAnswers} onRestart={restart} />
                ) : (
                    <TaskCard 
                        task={TASKS[currentTaskIndex]} 
                        onNext={handleNext} 
                        onPrev={handlePrev}
                        isLast={currentTaskIndex === TASKS.length - 1}
                        onSaveAnswer={saveAnswer}
                        savedAnswer={userAnswers[TASKS[currentTaskIndex].id]}
                    />
                )}
              </main>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>
